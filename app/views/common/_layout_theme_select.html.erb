<%-
#params:  layouts, page_layout roots,  
#         selected, the selected theme.
onchange=""
selected_value = 0
-%>

<select onchange="<%=onchange%>" name="<%=select_name%>" id="<%=select_name%>">
  <% for pl in page_layouts -%>
  <optgroup label="<%=pl.perma_name%>">
    <% options = pl.themes.collect{|theme| [theme.perma_name, theme.id] }-%>
    <%=  options_for_select(options, selected_value) -%>
  </optgroup>  
  <% end-%>
</select>